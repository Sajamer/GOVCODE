model Framework {
  id   String @id @default(cuid())
  name String @unique

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  attributes FrameworkAttribute[]
}

model FrameworkAttribute {
  id    String  @id @default(cuid())
  name  String
  value String? @db.Text

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  frameworkId String
  framework   Framework @relation(fields: [frameworkId], references: [id], onDelete: Cascade)

  parentId String?
  parent   FrameworkAttribute?  @relation("AttributeHierarchy", fields: [parentId], references: [id], onDelete: SetNull)
  children FrameworkAttribute[] @relation("AttributeHierarchy")

  rowIndex Int @default(0)
  colIndex Int @default(0)

  @@index([frameworkId])
  @@index([parentId])
}
